<!-- Navigation Desktop/Mobile unifiée -->
<nav class="bg-white/95 backdrop-blur-md border-b border-gray-200 shadow-lg fixed w-full z-50 top-0">
    <!-- Header Mobile -->
    <div class="lg:hidden px-4 py-3 flex justify-between items-center">
        <!-- Logo Mobile -->
        <a href="{{ path('app_home') }}"
           class="flex items-center space-x-2 group active:scale-95 transition-transform duration-200">
            <div class="relative">
                <img src="{{ asset('images/logo.svg') }}" alt="Livridea Logo"
                     class="w-9 h-9 transition-all duration-200 group-active:scale-110 drop-shadow-md">
                <div class="absolute inset-0 bg-gradient-to-br from-[#FF8A00]/20 to-transparent rounded-xl opacity-0 group-active:opacity-100 transition-opacity duration-200"></div>
            </div>
            <div class="flex flex-col">
                <span class="text-[#FF8A00] text-lg font-bold group-active:text-[#e67300] transition-colors duration-200 leading-none">
                    Livridea
                </span>
                <span class="text-xs text-gray-500 font-medium leading-none mt-0.5">
                    Découvrez & Partagez
                </span>
            </div>
        </a>

        <!-- Actions Header Mobile -->
        <div class="flex items-center space-x-2">
            <a href="{{ path('app_search') }}" class="relative group">
                <div class="p-2.5 rounded-xl bg-gray-50 active:bg-gradient-to-br active:from-[#FF8A00]/10 active:to-[#FF8A00]/5 transition-all duration-200 active:scale-95">
                    <svg class="w-5 h-5 text-gray-600 group-active:text-[#FF8A00] transition-colors duration-200"
                         viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                </div>
            </a>

            <a href="{{ path('app_chat') }}" class="relative group">
                <div class="p-2.5 rounded-xl bg-gray-50 active:bg-gradient-to-br active:from-[#FF8A00]/10 active:to-[#FF8A00]/5 transition-all duration-200 active:scale-95">
                    <svg class="w-5 h-5 text-gray-600 group-active:text-[#FF8A00] transition-colors duration-200"
                         viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                    </svg>
                </div>
                <div class="absolute -top-1 -right-1 bg-gradient-to-r from-red-500 to-red-600 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center font-medium border-2 border-white shadow-sm">
                    3
                </div>
            </a>

            <a href="{{ path('dashboard_user_profile') }}" class="relative group">
                <div class="relative">
                    <div class="w-9 h-9 rounded-full overflow-hidden border-2 border-gray-200 active:border-[#FF8A00] transition-all duration-200 active:scale-95 shadow-sm bg-white">
                        <img src="{{ asset(app.user.avatarPath|default('/images/default-profile.png')) }}" alt="Profile"
                             class="w-full h-full object-cover">
                    </div>
                    <div class="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-emerald-500 border-2 border-white rounded-full shadow-sm"></div>
                </div>
            </a>
        </div>
    </div>

    <!-- Navigation Desktop -->
    <div class="hidden lg:flex items-center justify-between px-8 py-4">
        <!-- Logo Desktop -->
        <a href="{{ path('app_home') }}"
           class="flex items-center space-x-3 group hover:scale-105 transition-transform duration-200">
            <div class="relative">
                <img src="{{ asset('images/logo.svg') }}" alt="Livridea Logo"
                     class="w-10 h-10 transition-all duration-200 group-hover:scale-110 drop-shadow-md">
                <div class="absolute inset-0 bg-gradient-to-br from-[#FF8A00]/20 to-transparent rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-200"></div>
            </div>
            <div class="flex flex-col">
                <span class="text-[#FF8A00] text-xl font-bold group-hover:text-[#e67300] transition-colors duration-200 leading-none">
                    Livridea
                </span>
                <span class="text-sm text-gray-500 font-medium leading-none mt-0.5">
                    Découvrez & Partagez
                </span>
            </div>
        </a>

        <!-- Navigation centrale Desktop -->
        <div class="flex items-center space-x-2 bg-gray-50/80 backdrop-blur-sm rounded-2xl p-2 border border-gray-200/50">
            <a href="{{ path('app_home') }}"
               class="group flex items-center px-5 py-3 rounded-xl transition-all duration-200 hover:scale-105
                      {% if app.request.attributes.get('_route') == 'app_home' %}
                        text-[#FF8A00] bg-white shadow-md border border-orange-100 font-semibold
                      {% else %}
                        text-gray-600 hover:text-[#FF8A00] hover:bg-white/70 font-medium
                      {% endif %}">
                <svg class="w-5 h-5 mr-3 transition-all group-hover:scale-110" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                </svg>
                <span class="text-sm">Accueil</span>
            </a>

            <a href="{{ path('notifications_list') }}"
               class="group flex items-center px-5 py-3 rounded-xl transition-all duration-200 hover:scale-105 relative
                      {% if app.request.attributes.get('_route') == 'notifications_list' %}
                        text-[#FF8A00] bg-white shadow-md border border-orange-100 font-semibold
                      {% else %}
                        text-gray-600 hover:text-[#FF8A00] hover:bg-white/70 font-medium
                      {% endif %}">
                <div class="relative mr-3">
                    <svg class="w-5 h-5 transition-all group-hover:scale-110" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
                    </svg>
                    <div class="absolute -top-1 -right-1 bg-gradient-to-r from-red-500 to-red-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-semibold border-2 border-white shadow-sm">
                        2
                    </div>
                </div>
                <span class="text-sm">Notifications</span>
            </a>

            <a href="{{ path('app_menu') }}"
               class="group flex items-center px-5 py-3 rounded-xl transition-all duration-200 hover:scale-105
                      {% if app.request.attributes.get('_route') == 'app_menu' %}
                        text-[#FF8A00] bg-white shadow-md border border-orange-100 font-semibold
                      {% else %}
                        text-gray-600 hover:text-[#FF8A00] hover:bg-white/70 font-medium
                      {% endif %}">
                <svg class="w-5 h-5 mr-3 transition-all group-hover:scale-110" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
                <span class="text-sm">Découvrir</span>
            </a>

            <a href="{{ path('app_chat') }}"
               class="group flex items-center px-5 py-3 rounded-xl transition-all duration-200 hover:scale-105 relative
                      {% if app.request.attributes.get('_route') == 'app_chat' %}
                        text-[#FF8A00] bg-white shadow-md border border-orange-100 font-semibold
                      {% else %}
                        text-gray-600 hover:text-[#FF8A00] hover:bg-white/70 font-medium
                      {% endif %}">
                <div class="relative mr-3">
                    <svg class="w-5 h-5 transition-all group-hover:scale-110" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                    </svg>
                    <div class="absolute -top-1 -right-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-semibold border-2 border-white shadow-sm">
                        3
                    </div>
                </div>
                <span class="text-sm">Messages</span>
            </a>
        </div>

        <!-- Barre de recherche + Profil Desktop -->
        <div class="flex items-center space-x-4">
            <form method="get" action="{{ path('app_search') }}" class="relative">
                <div class="relative">
                    <input type="text" name="q"
                           class="w-80 pl-12 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-2xl
                                  focus:outline-none focus:ring-2 focus:ring-[#FF8A00] focus:border-transparent
                                  text-sm text-gray-700 placeholder-gray-400 transition-all duration-200 hover:bg-white"
                           placeholder="Rechercher un lecteur, une citation, un roman...">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <svg class="w-5 h-5 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                             stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </div>
                </div>
            </form>

            {% if app.user %}
                <a href="{{ path('dashboard_user_profile') }}" class="group relative">
                    <div class="flex items-center space-x-3 p-2 rounded-xl hover:bg-gray-50 transition-all duration-200 hover:scale-105">
                        <div class="relative">
                            <div class="w-10 h-10 rounded-full overflow-hidden border-2 border-gray-200 group-hover:border-[#FF8A00] transition-all duration-200 shadow-sm">
                                <img src="{{ asset(app.user.avatarPath|default('/images/default-profile.png')) }}"
                                     alt="Profile" class="w-full h-full object-cover">
                            </div>
                            <div class="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-emerald-500 border-2 border-white rounded-full shadow-sm"></div>
                        </div>
                        <div class="hidden xl:block">
                            <p class="text-sm font-semibold text-gray-700 group-hover:text-[#FF8A00] transition-colors">
                                {{ app.user.fullName|default(app.user.username) }}
                            </p>
                            <p class="text-xs text-gray-500">
                                @{{ app.user.username }}
                            </p>
                        </div>
                    </div>
                </a>
            {% endif %}
        </div>
    </div>
</nav>

<!-- Navigation mobile en bas -->
<nav class="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-gray-200 shadow-lg z-50 lg:hidden">
    <div class="flex justify-around items-center px-2 py-2 max-w-md mx-auto">
        <a href="{{ path('app_home') }}" class="flex flex-col items-center p-2 rounded-xl transition-all duration-200 active:scale-95 min-w-[68px] relative
           {% if app.request.attributes.get('_route') == 'app_home' %}text-[#FF8A00] bg-gradient-to-br from-orange-50 to-orange-100/50 shadow-sm{% else %}text-gray-500 active:bg-gray-50{% endif %}">
            <svg class="w-6 h-6 mb-1" viewBox="0 0 24 24" fill="currentColor">
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
            <span class="text-xs font-medium">Accueil</span>
        </a>

        <a href="{{ path('dashboard_user_profile') }}" class="flex flex-col items-center p-2 rounded-xl transition-all duration-200 active:scale-95 min-w-[68px] relative
           {% if app.request.attributes.get('_route') == 'dashboard_user_profile' %}text-[#FF8A00] bg-gradient-to-br from-orange-50 to-orange-100/50 shadow-sm{% else %}text-gray-500 active:bg-gray-50{% endif %}">
            <div class="relative mb-1">
                <div class="w-6 h-6 rounded-full overflow-hidden border border-gray-300">
                    <img src="{{ asset(app.user.avatarPath|default('/images/default-profile.png')) }}" alt="Profile"
                         class="w-full h-full object-cover">
                </div>
                <div class="absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-emerald-500 border border-white rounded-full"></div>
            </div>
            <span class="text-xs font-medium">Profil</span>
        </a>

        <button onclick="openPublishModal()"
                class="bg-gradient-to-br from-[#FF8A00] to-[#e67300] text-white p-3 rounded-full shadow-lg active:scale-95 transition-all duration-200 relative overflow-hidden">
            <svg class="w-7 h-7 relative z-10" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
            </svg>
            <div class="absolute inset-0 bg-white/20 rounded-full animate-pulse"></div>
        </button>

        <a href="{{ path('notifications_list') }}" class="flex flex-col items-center p-2 rounded-xl transition-all duration-200 active:scale-95 relative min-w-[68px]
           {% if app.request.attributes.get('_route') == 'notifications_list' %}text-[#FF8A00] bg-gradient-to-br from-orange-50 to-orange-100/50 shadow-sm{% else %}text-gray-500 active:bg-gray-50{% endif %}">
            <div class="relative">
                <svg class="w-6 h-6 mb-1" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
                </svg>
                <div class="absolute -top-1 -right-1 bg-gradient-to-r from-red-500 to-red-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-semibold border-2 border-white shadow-sm">
                    2
                </div>
            </div>
            <span class="text-xs font-medium">Notifications</span>
        </a>

        <a href="{{ path('app_menu') }}" class="flex flex-col items-center p-2 rounded-xl transition-all duration-200 active:scale-95 min-w-[68px] relative
           {% if app.request.attributes.get('_route') == 'app_menu' %}text-[#FF8A00] bg-gradient-to-br from-orange-50 to-orange-100/50 shadow-sm{% else %}text-gray-500 active:bg-gray-50{% endif %}">
            <svg class="w-6 h-6 mb-1" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            <span class="text-xs font-medium">Découvrir</span>
        </a>
    </div>
</nav>