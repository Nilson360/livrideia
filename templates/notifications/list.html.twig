{% extends 'base.html.twig' %}

{% block title %}Mes notifications{% endblock %}

{% block main_content %}
    <div class="max-w-2xl max-h-fit mx-auto bg-white shadow-md rounded-lg p-6 mt-6">
        <h1 class="text-3xl font-semibold mb-6">Mes notifications</h1>

        {% if notifications is not empty %}
            <ul class="divide-y divide-gray-200">
                {% for notification in notifications %}
                    <li class="p-4 flex items-start gap-4 {% if not notification.isRead %}bg-gray-50{% endif %}">
                        <div class="flex-1">
                            <p class="text-sm text-gray-700">
                                <span class="font-medium">
                                    {% if notification.type == 'friend_request' %}
                                        Demande d'amiti√© :
                                    {% elseif notification.type == 'like' %}
                                        Like :
                                    {% elseif notification.type == 'comment' %}
                                        Commentaire :
                                    {% elseif notification.type == 'new_post' %}
                                        Nouvelle publication :
                                    {% else %}
                                        Notification :
                                    {% endif %}
                                </span>
                                {{ notification.message }}
                            </p>
                            <p class="text-xs text-gray-500 mt-1">{{ notification.createdAt|date('d/m/Y H:i') }}</p>
                        </div>

                        {% if not notification.isRead %}
                            <form method="post" action="{{ path('notification_mark_as_read', {'id': notification.id}) }}" class="self-center">
                                <button type="submit" class="text-blue-600 text-sm hover:underline">Marquer comme lue</button>
                            </form>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-gray-600 text-center">Aucune notification.</p>
        {% endif %}
    </div>
{% endblock %}
